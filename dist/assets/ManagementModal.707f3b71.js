var e,t,o=Object.defineProperty,a=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,l=(e,t,a)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,i=(e,t,o)=>new Promise(((a,n)=>{var r=e=>{try{i(o.next(e))}catch(t){n(t)}},l=e=>{try{i(o.throw(e))}catch(t){n(t)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,l);i((o=o.apply(e,t)).next())}));import{_ as s,b as d}from"./useModal.735ea034.js";import{e as u}from"./BasicForm.c38a0cc7.js";import{u as c}from"./useForm.266127a6.js";import{a2 as m,bk as p,k as f,r as y,f as b,u as C,L as g,o as I,q as M,R as h,s as v,O as x}from"./vendor.c2cc062a.js";/* empty css              */import{aA as q}from"./index.02e800e3.js";(t=e||(e={})).GetCountryConfPage="/admin/Node/findAll",t.GetCountryConfAll="/Manager/SysCountryConf/GetCountryConfAll",t.AddCountryConf="/admin/Node/addNode",t.GetCountryConf="/Manager/SysCountryConf/GetCountryConf",t.UpdateCountryConf="/admin/Node/updNode",t.DeleteCountryConf="/admin/Node/delNode";const j=t=>q.post({url:e.GetCountryConfPage});function O(t,o="modal"){return q.post({url:e.DeleteCountryConf,params:t},{errorMessageMode:o})}const P=[{title:"ID",dataIndex:"id"},{title:"节点期数",dataIndex:"pnumber"},{title:"收益倍数",dataIndex:"income"},{title:"认购数量",dataIndex:"quantity"},{title:"认购价格",dataIndex:"price"},{title:"抢购名额",dataIndex:"quota"},{title:"抢购时间",dataIndex:"enoughTime"},{title:"剩余名额",dataIndex:"useQuote"},{title:"节点认购状态",dataIndex:"state",customRender:({record:e})=>{let t;switch(e.state){case 0:t="未开始";break;case 1:t="抢购中";break;case 2:t="已完成"}return m(p,{},(()=>t))}}],S=[{field:"id",label:"ID",component:"Input",required:!1,show:!1},{field:"income",label:"收益倍数",component:"Input",required:!0},{field:"quantity",label:"认购数量",component:"Input",required:!0},{field:"price",label:"认购价格",component:"Input",required:!0},{field:"quota",label:"抢购名额",component:"Input",required:!0},{field:"enoughTime",label:"抢购时间",component:"Input",required:!0},{field:"useQuote",label:"剩余名额",component:"Input",required:!0},{field:"state",label:"节点认购状态",component:"Select",required:!0,componentProps:{options:[{label:"未开始",value:0},{label:"抢购中",value:1},{label:"已完成",value:2}]}}];var w=f({name:"ManagementModal",components:{BasicModal:s,BasicForm:u},emits:["success","register"],setup(t,{emit:o}){const s=y(!0),[u,{setFieldsValue:m,updateSchema:p,resetFields:f,validate:g}]=c({labelWidth:140,schemas:S,showActionButtonGroup:!1,actionColOptions:{span:23}}),[I,{setModalProps:M,closeModal:h}]=d((e=>i(this,null,(function*(){f(),M({confirmLoading:!1}),s.value=!!(null==e?void 0:e.isUpdate),C(s)&&m(((e,t)=>{for(var o in t||(t={}))n.call(t,o)&&l(e,o,t[o]);if(a)for(var o of a(t))r.call(t,o)&&l(e,o,t[o]);return e})({},e.record))}))));return{registerModal:I,registerForm:u,getTitle:b((()=>C(s)?"编辑节点":"新增节点")),handleSubmit:function(){return i(this,null,(function*(){try{const t=yield g();M({confirmLoading:!0}),t.id?yield function(t,o="modal"){return q.post({url:e.UpdateCountryConf,params:t},{errorMessageMode:o})}(t):yield function(t,o="modal"){return q.post({url:e.AddCountryConf,params:t},{errorMessageMode:o})}(t),h(),o("success")}finally{M({confirmLoading:!1})}}))}}}});w.render=function(e,t,o,a,n,r){const l=g("BasicForm"),i=g("BasicModal");return I(),M(i,x(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:h((()=>[v(l,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};var F=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:w});export{O as D,j as G,F as M,w as _,P as c};
