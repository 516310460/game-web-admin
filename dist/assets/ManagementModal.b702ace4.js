var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(t,o,r)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r,n=(e,t,o)=>new Promise(((r,i)=>{var n=e=>{try{l(o.next(e))}catch(t){i(t)}},a=e=>{try{l(o.throw(e))}catch(t){i(t)}},l=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,a);l((o=o.apply(e,t)).next())}));import{_ as a,b as l}from"./useModal.27b1d095.js";import{e as s}from"./BasicForm.f0f3ac75.js";import{u as d}from"./useForm.add62195.js";import{k as m,r as c,u as p,f as u,L as f,o as b,q as j,R as g,s as v,O as h}from"./vendor.c2cc062a.js";/* empty css              */import{U as x,A as y}from"./CcMarketCoin.73eb2a0f.js";import"./index.a031c7d6.js";import"./useWindowSizeFn.f7fa6c6d.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./CountdownInput.2db3c173.js";/* empty css              *//* empty css              */import"./uuid.2b29000c.js";import"./download.fca7766c.js";import"./StrengthMeter.13358396.js";const M=[{field:"id",label:"ID",component:"Input",required:!1,show:!1},{field:"roomId",label:"大厅id",component:"Input",required:!0},{field:"gameIndex",label:"游戏关数",component:"Input",required:!0},{field:"state",label:"游戏状态",component:"Select",required:!0,componentProps:{options:[{label:"待开启",value:0},{label:"已开启",value:1},{label:"已售罄",value:2},{label:"已退款",value:3},{label:"已结算",value:4}]}},{field:"targetAmount",label:"过关目标数量",component:"Input",required:!0},{field:"completed",label:"已完成数量",component:"Input",required:!0},{field:"maxAmount",label:"单账户最高投入数量",component:"Input",required:!0},{field:"interestRate",label:"每期收益率",component:"Input",required:!0},{field:"serviceCharge",label:"手续费(扣除平台币比例)",component:"Input",required:!0},{field:"startTime",label:"开始时间",component:"DatePicker",required:!0,componentProps:{valueFormat:"YYYY-MM-DD HH:mm:ss"}},{field:"endTime",label:"结束时间",component:"DatePicker",required:!0,componentProps:{valueFormat:"YYYY-MM-DD HH:mm:ss"}}];var I=m({name:"ManagementModal",components:{BasicModal:a,BasicForm:s},emits:["success","register"],setup(e,{emit:a}){const s=c(!0),[m,{setFieldsValue:f,updateSchema:b,resetFields:j,validate:g}]=d({labelWidth:100,schemas:M,showActionButtonGroup:!1,actionColOptions:{span:23}}),[v,{setModalProps:h,closeModal:I}]=l((e=>n(this,null,(function*(){j(),h({confirmLoading:!1}),s.value=!!(null==e?void 0:e.isUpdate),p(s)&&f(((e,n)=>{for(var a in n||(n={}))o.call(n,a)&&i(e,a,n[a]);if(t)for(var a of t(n))r.call(n,a)&&i(e,a,n[a]);return e})({},e.record))}))));return{registerModal:v,registerForm:m,getTitle:u((()=>p(s)?"编辑游戏":"新增游戏")),handleSubmit:function(){return n(this,null,(function*(){try{const e=yield g();h({confirmLoading:!0}),e.id?yield x(e):yield y(e),I(),a("success")}finally{h({confirmLoading:!1})}}))}}}});I.render=function(e,t,o,r,i,n){const a=f("BasicForm"),l=f("BasicModal");return b(),j(l,h(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:g((()=>[v(a,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};export default I;
