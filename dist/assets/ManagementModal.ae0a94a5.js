var e,r,a=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(e,r,t)=>r in e?a(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,s=(e,r,a)=>new Promise(((t,o)=>{var n=e=>{try{s(a.next(e))}catch(r){o(r)}},i=e=>{try{s(a.throw(e))}catch(r){o(r)}},s=e=>e.done?t(e.value):Promise.resolve(e.value).then(n,i);s((a=a.apply(e,r)).next())}));import{_ as l,b as d}from"./useModal.24c63ad5.js";import{e as c}from"./BasicForm.4e8612e4.js";import{u}from"./useForm.c8762787.js";import{a2 as m,bk as p,k as f,r as g,f as b,u as M,L as P,o as v,q as h,R as y,s as T,O as I}from"./vendor.c2cc062a.js";/* empty css              */import{aA as j}from"./index.a9cd95f2.js";(r=e||(e={})).GetTradePairPage="/admin/miner/findAll",r.AddTradePair="/admin/miner/addMiner",r.GetTradePair="/Manager/CcTradePair/GetTradePair",r.UpdateTradePair="/admin/miner/updMiner",r.DeleteTradePair="/admin/miner/delMiner";const x=r=>j.post({url:e.GetTradePairPage});function O(r,a="modal"){return j.post({url:e.DeleteTradePair,params:r},{errorMessageMode:a})}const F=[{title:"ID",dataIndex:"id"},{title:"总算力",dataIndex:"ghs"},{title:"矿机名称",dataIndex:"mname"},{title:"矿机总价格",dataIndex:"price"},{title:"汇报倍数",dataIndex:"rate"},{title:"矿机状态",dataIndex:"state",customRender:({record:e})=>{const r=e.state,a=1===r?"抢购中":0===r?"已下架":"待上架";return m(p,{color:1===r?"green":"red"},(()=>a))}}],w=[{field:"id",label:"ID",component:"Input",required:!1,show:!1},{field:"price",label:"矿机名称",component:"Input",required:!0},{field:"ghs",label:"矿机总价格",component:"Input",required:!0},{field:"rate",label:"汇报倍数",component:"Input",required:!0},{field:"state",label:"交易对状态",component:"Select",required:!0,componentProps:{options:[{label:"已下架",value:0},{label:"抢购中",value:1},{label:"待上架",value:2}]}}];var S=f({name:"ManagementModal",components:{BasicModal:l,BasicForm:c},emits:["success","register"],setup(r,{emit:a}){const l=g(!0),[c,{setFieldsValue:m,updateSchema:p,resetFields:f,validate:P}]=u({labelWidth:140,schemas:w,showActionButtonGroup:!1,actionColOptions:{span:23}}),[v,{setModalProps:h,closeModal:y}]=d((e=>s(this,null,(function*(){f(),h({confirmLoading:!1}),l.value=!!(null==e?void 0:e.isUpdate),M(l)&&m(((e,r)=>{for(var a in r||(r={}))o.call(r,a)&&i(e,a,r[a]);if(t)for(var a of t(r))n.call(r,a)&&i(e,a,r[a]);return e})({},e.record))}))));return{registerModal:v,registerForm:c,getTitle:b((()=>M(l)?"编辑矿机":"新增矿机")),handleSubmit:function(){return s(this,null,(function*(){try{const r=yield P();h({confirmLoading:!0}),r.id?yield function(r,a="modal"){return j.post({url:e.UpdateTradePair,params:r},{errorMessageMode:a})}(r):yield function(r,a="modal"){return j.post({url:e.AddTradePair,params:r},{errorMessageMode:a})}(r),y(),a("success")}finally{h({confirmLoading:!1})}}))}}}});S.render=function(e,r,a,t,o,n){const i=P("BasicForm"),s=P("BasicModal");return v(),h(s,I(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:y((()=>[T(i,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};var _=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:S});export{O as D,x as G,_ as M,S as _,F as c};
