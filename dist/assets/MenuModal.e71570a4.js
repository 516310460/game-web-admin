var e,t,a=Object.defineProperty,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(e,t,o)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,l=(e,t,a)=>new Promise(((o,r)=>{var s=e=>{try{l(a.next(e))}catch(t){r(t)}},n=e=>{try{l(a.throw(e))}catch(t){r(t)}},l=e=>e.done?o(e.value):Promise.resolve(e.value).then(s,n);l((a=a.apply(e,t)).next())}));import{_ as i,b as d}from"./useModal.36f6a78c.js";import{e as c}from"./BasicForm.a8faf294.js";import{u as m}from"./useForm.d1aaf8d6.js";import{f as u}from"./menu.data.c81de5a7.js";import{aA as f}from"./index.05b44a3f.js";import{k as p,r as g,f as y,u as b,L as M,o as v,q as R,R as h,s as j,O}from"./vendor.c2cc062a.js";(t=e||(e={})).GetRolePage="/admin/syscfg/list",t.AddRole="/admin/syscfg/add",t.GetRole="/admin/syscfg/GetRole",t.UpdateRole="/admin/syscfg/update",t.DeleteRole="/admin/syscfg/delete";const F=t=>f.post({url:e.GetRolePage});var P=p({name:"ManagementModal",components:{BasicModal:i,BasicForm:c},emits:["success","register"],setup(t,{emit:a}){const i=g(!0),[c,{setFieldsValue:p,updateSchema:M,resetFields:v,validate:R}]=m({labelWidth:100,schemas:u,showActionButtonGroup:!1,actionColOptions:{span:23}}),[h,{setModalProps:j,closeModal:O}]=d((e=>l(this,null,(function*(){v(),j({confirmLoading:!1}),i.value=!!(null==e?void 0:e.isUpdate),b(i)&&p(((e,t)=>{for(var a in t||(t={}))r.call(t,a)&&n(e,a,t[a]);if(o)for(var a of o(t))s.call(t,a)&&n(e,a,t[a]);return e})({},e.record))}))));return{registerModal:h,registerForm:c,getTitle:y((()=>b(i)?"编辑系统配置":"新增系统配置")),handleSubmit:function(){return l(this,null,(function*(){try{const t=yield R();j({confirmLoading:!0}),t.id?yield function(t,a="modal"){return f.post({url:e.UpdateRole,params:t},{errorMessageMode:a})}(t):yield function(t,a="modal"){return f.post({url:e.AddRole,params:t},{errorMessageMode:a})}(t),O(),a("success")}finally{j({confirmLoading:!1})}}))}}}});P.render=function(e,t,a,o,r,s){const n=M("BasicForm"),l=M("BasicModal");return v(),R(l,O(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:h((()=>[j(n,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};var _=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:P});export{F as G,_ as M,P as _};
