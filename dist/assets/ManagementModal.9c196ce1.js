var e,t,n=Object.defineProperty,o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,t,o)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,s=(e,t,n)=>new Promise(((o,a)=>{var i=e=>{try{s(n.next(e))}catch(t){a(t)}},r=e=>{try{s(n.throw(e))}catch(t){a(t)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(i,r);s((n=n.apply(e,t)).next())}));import{_ as l,b as d}from"./useModal.dcdb6d0a.js";import{e as c}from"./BasicForm.a51bedc7.js";import{u}from"./useForm.192a42cf.js";import{a2 as m,bk as p,k as f,r as b,f as g,u as C,L as I,o as O,q as y,R as M,s as x,O as h}from"./vendor.c2cc062a.js";/* empty css              */import{aA as v}from"./index.da4646fd.js";(t=e||(e={})).GetOtcCoinListConfPage="/admin/coins/findAll",t.AddOtcCoinListConf="/admin/coins/addCoin",t.GetOtcCoinListConf="/Manager/OtcCoinListConf/GetOtcCoinListConf",t.UpdateOtcCoinListConf="/admin/coins/updCoin",t.DeleteOtcCoinListConf="/admin/coins/delCoin";const L=t=>v.post({url:e.GetOtcCoinListConfPage});function P(t,n="modal"){return v.post({url:e.DeleteOtcCoinListConf,params:t},{errorMessageMode:n})}const j=[{title:"币种id",dataIndex:"id"},{title:"币种名称",dataIndex:"coinName"},{title:"提币手续费百分比",dataIndex:"fee"},{title:"所属主网",dataIndex:"mainNet"},{title:"单次最小提币金额",dataIndex:"minPayAmount"},{title:"单次最大提币金额",dataIndex:"maxPayAmount"},{title:"最小充值金额",dataIndex:"minRechargeAmount"},{title:"币种介绍关联新闻ID",dataIndex:"newsId"},{title:"转账手续费百分比",dataIndex:"transFee"},{title:"状态",dataIndex:"state",customRender:({record:e})=>{const t=e.state,n=1===t?"启用提币":"暂停提币";return m(p,{color:1===t?"green":"red"},(()=>n))}}],q=[{field:"id",label:"ID",component:"Input",required:!1,show:!1},{field:"mainNet",label:"所属主网",component:"Input",required:!0},{field:"coinName",label:"币种名称",component:"Input",required:!0},{field:"minRechargeAmount",label:"最小充值金额",component:"Input",required:!0},{field:"minPayAmount",label:"单次最小提币金额",component:"Input",required:!0},{field:"maxPayAmount",label:"单次最大提币金额",component:"Input",required:!0},{field:"fee",label:"提币手续费百分比",component:"Input",required:!0},{field:"newsId",label:"币种介绍关联新闻ID",component:"Input",required:!1},{field:"transFee",label:"转账手续费百分比",component:"Input",required:!0},{field:"state",label:"状态",component:"Select",required:!0,componentProps:{options:[{label:"暂停提币",value:0},{label:"启用提币",value:1}]}}];var A=f({name:"ManagementModal",components:{BasicModal:l,BasicForm:c},emits:["success","register"],setup(t,{emit:n}){const l=b(!0),[c,{setFieldsValue:m,updateSchema:p,resetFields:f,validate:I}]=u({labelWidth:140,schemas:q,showActionButtonGroup:!1,actionColOptions:{span:23}}),[O,{setModalProps:y,closeModal:M}]=d((e=>s(this,null,(function*(){f(),y({confirmLoading:!1}),l.value=!!(null==e?void 0:e.isUpdate),C(l)&&m(((e,t)=>{for(var n in t||(t={}))a.call(t,n)&&r(e,n,t[n]);if(o)for(var n of o(t))i.call(t,n)&&r(e,n,t[n]);return e})({},e.record))}))));return{registerModal:O,registerForm:c,getTitle:g((()=>C(l)?"编辑币种":"新增币种")),handleSubmit:function(){return s(this,null,(function*(){try{const t=yield I();y({confirmLoading:!0}),t.id?yield function(t,n="modal"){return v.post({url:e.UpdateOtcCoinListConf,params:t},{errorMessageMode:n})}(t):yield function(t,n="modal"){return v.post({url:e.AddOtcCoinListConf,params:t},{errorMessageMode:n})}(t),M(),n("success")}finally{y({confirmLoading:!1})}}))}}}});A.render=function(e,t,n,o,a,i){const r=I("BasicForm"),s=I("BasicModal");return O(),y(s,h(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:M((()=>[x(r,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};var F=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:A});export{P as D,L as G,F as M,A as _,j as c};
