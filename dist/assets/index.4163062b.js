var e=(e,t,a)=>new Promise(((n,l)=>{var o=e=>{try{d(a.next(e))}catch(t){l(t)}},i=e=>{try{d(a.throw(e))}catch(t){l(t)}},d=e=>e.done?n(e.value):Promise.resolve(e.value).then(o,i);d((a=a.apply(e,t)).next())}));import{_ as t}from"./TableImg.64a40dd3.js";import{_ as a}from"./BasicForm.15159022.js";import{u as n}from"./useTable.b1d12c6f.js";import{b as l,u as o}from"./system.d6ec51a5.js";import{_ as i}from"./PageWrapper.304283c7.js";import d from"./DeptTree.7b07ecd2.js";import{u as s}from"./useModal.df8770e7.js";import r from"./AccountModal.0f074b1d.js";import{g as u}from"./useFunction.14dfe9fd.js";import{k as c,r as m,L as p,o as b,q as f,R as v,s as j}from"./vendor.c2cc062a.js";/* empty css              *//* empty css              */import"./useForm.096e68f4.js";import"./index.e2f8dfb6.js";/* empty css              *//* empty css              *//* empty css              */import"./uuid.2b29000c.js";import"./useWindowSizeFn.f7fa6c6d.js";import"./onMountedOrActivated.5a05012f.js";/* empty css              */import"./useSortable.584897bb.js";import"./useExpose.9766eb76.js";/* empty css              *//* empty css              *//* empty css              */import"./CountdownInput.d437ddc4.js";/* empty css              */import"./download.bc82a2de.js";import"./StrengthMeter.48e5d163.js";import"./usePageContext.e3c0a1fa.js";/* empty css              *//* empty css              */import"./Tree.vue_vue&type=style&index=0&lang.5a1b8b3a.js";import"./useContextMenu.652d6cb9.js";const x=[{title:"ID",dataIndex:"id"},{title:"父级ID",dataIndex:"pid"},{title:"用户名",dataIndex:"userName"},{title:"角色名称",dataIndex:"nickName"},{title:"用户级别",dataIndex:"level",editRow:!0},{title:"矿机销售级别",dataIndex:"saleLevel",editRow:!0},{title:"助记词",dataIndex:"mnemonic"},{title:"状态",dataIndex:"state",editRow:!0,editComponent:"Select",editComponentProps:{options:[{label:"正常",value:"normal"},{label:"锁定",value:"locked"},{label:"暂停提币",value:"forbid"}]}},{title:"创建时间",dataIndex:"createTime"}],g=[{field:"userName",label:"用户名",component:"Input",colProps:{span:8}}];var h=c({name:"AccountManagement",components:{BasicTable:t,PageWrapper:i,DeptTree:d,AccountModal:r,TableAction:a},setup(){const t=m(""),[a,{openModal:i}]=s(),[d,{reload:r}]=n({title:"用户列表",api:l,columns:x,formConfig:{labelWidth:80,schemas:g},showIndexColumn:!1,useSearchForm:!0,showTableSetting:!0,bordered:!0,actionColumn:{width:220,title:"操作",dataIndex:"action",slots:{customRender:"action"}}}),c=m();function p(e){var a;t.value=e.key,null==(a=e.onEdit)||a.call(e,!0)}function b(e){var a;t.value="",null==(a=e.onEdit)||a.call(e,!1,!1)}function f(a){return e(this,null,(function*(){var e;(yield null==(e=a.onEdit)?void 0:e.call(a,!1,!0))&&(t.value="",yield o({id:a.id,level:a.level,saleLevel:a.saleLevel,state:a.state}))}))}function v(e,t){i(!0,{record:e,isUpdate:1!=t,type:t})}return c.value=u(),{registerTable:d,registerModal:a,handleCreate:function(){i(!0,{isUpdate:!1})},handleEdit:p,handleDelete:function(t){return e(this,null,(function*(){}))},handleSuccess:function(){r()},handleSelect:function(e=""){r({searchInfo:{deptId:e}})},createActions:function(e,a){return e.editable?[{label:"保存",onClick:f.bind(null,e,a)},{label:"取消",popConfirm:{title:"是否取消编辑",confirm:b.bind(null,e,a)}}]:[{label:"编辑",disabled:!(!t.value&&c.value.includes("update"))&&t.value!==e.key,auth:!c.value.includes("update"),onClick:p.bind(null,e)},{label:"查上级",disabled:!(!t.value&&c.value.includes("getSuperior"))&&t.value!==e.key,auth:!c.value.includes("getSuperior"),onClick:v.bind(null,e,1)},{label:"查下级",disabled:!(!t.value&&c.value.includes("getSubordinate"))&&t.value!==e.key,auth:!c.value.includes("getSubordinate"),onClick:v.bind(null,e,2)}]},funcKeyArray:c}}});h.render=function(e,t,a,n,l,o){const i=p("TableAction"),d=p("BasicTable"),s=p("AccountModal"),r=p("PageWrapper");return b(),f(r,{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex"},{default:v((()=>[j(d,{onRegister:e.registerTable,class:"w-full xl:w-full"},{action:v((({record:t,column:a})=>[j(i,{actions:e.createActions(t,a)},null,8,["actions"])])),_:1},8,["onRegister"]),j(s,{onRegister:e.registerModal,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])])),_:1})};export default h;
