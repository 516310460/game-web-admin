var e,t,a=Object.defineProperty,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l=(e,t,a)=>new Promise(((r,o)=>{var n=e=>{try{l(a.next(e))}catch(t){o(t)}},i=e=>{try{l(a.throw(e))}catch(t){o(t)}},l=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,i);l((a=a.apply(e,t)).next())}));import{_ as s,b as d}from"./useModal.dcdb6d0a.js";import{e as m}from"./BasicForm.a51bedc7.js";import{u as c}from"./useForm.192a42cf.js";import{a2 as u,bk as p,k as f,r as b,f as M,u as g,L as I,o as k,q as v,R as C,s as x,O as h}from"./vendor.c2cc062a.js";/* empty css              */import{aA as y}from"./index.da4646fd.js";(t=e||(e={})).CcMarketCoinList="/admin/game/findAll",t.GetMarketCoin="/Manager/CcMarketCoin/GetMarketCoin",t.AddMarketCoin="/admin/game/addGame",t.UpdateMarketCoin="/admin/game/updGame",t.DeleteMarketCoin="/Manager/CcMarketCoin/DeleteMarketCoin";const q=t=>y.post({url:e.CcMarketCoinList});function D(t,a="modal"){return y.post({url:e.DeleteMarketCoin,params:t},{errorMessageMode:a})}const j=[{title:"ID",dataIndex:"id"},{dataIndex:"roomId",title:"大厅id"},{dataIndex:"gameIndex",title:"游戏关数"},{dataIndex:"targetAmount",title:"过关目标数量"},{dataIndex:"completed",title:"已完成数量"},{dataIndex:"maxAmount",title:"单账户最高投入数量"},{dataIndex:"interestRate",title:"每期收益率"},{dataIndex:"serviceCharge",title:"手续费(扣除平台币比例)"},{dataIndex:"startTime",title:"开始时间"},{dataIndex:"endTime",title:"结束时间"},{dataIndex:"state",title:"游戏状态",customRender:({record:e})=>{let t="";switch(e.state){case 0:t="待开启";break;case 1:t="已开启";break;case 2:t="已售罄";break;case 3:t="已退款";break;case 4:t="已结算"}return u(p,{},(()=>t))}}],O=[{field:"id",label:"ID",component:"Input",required:!1,show:!1},{field:"roomId",label:"大厅id",component:"Input",required:!0},{field:"gameIndex",label:"游戏关数",component:"Input",required:!0},{field:"state",label:"游戏状态",component:"Select",required:!0,componentProps:{options:[{label:"待开启",value:0},{label:"已开启",value:1},{label:"已售罄",value:2},{label:"已退款",value:3},{label:"已结算",value:4}]}},{field:"targetAmount",label:"过关目标数量",component:"Input",required:!0},{field:"completed",label:"已完成数量",component:"Input",required:!0},{field:"maxAmount",label:"单账户最高投入数量",component:"Input",required:!0},{field:"interestRate",label:"每期收益率",component:"Input",required:!0},{field:"serviceCharge",label:"手续费(扣除平台币比例)",component:"Input",required:!0},{field:"startTime",label:"开始时间",component:"DatePicker",required:!0,componentProps:{valueFormat:"YYYY-MM-DD HH:mm:ss"}},{field:"endTime",label:"结束时间",component:"DatePicker",required:!0,componentProps:{valueFormat:"YYYY-MM-DD HH:mm:ss"}}];var P=f({name:"ManagementModal",components:{BasicModal:s,BasicForm:m},emits:["success","register"],setup(t,{emit:a}){const s=b(!0),[m,{setFieldsValue:u,updateSchema:p,resetFields:f,validate:I}]=c({labelWidth:100,schemas:O,showActionButtonGroup:!1,actionColOptions:{span:23}}),[k,{setModalProps:v,closeModal:C}]=d((e=>l(this,null,(function*(){f(),v({confirmLoading:!1}),s.value=!!(null==e?void 0:e.isUpdate),g(s)&&u(((e,t)=>{for(var a in t||(t={}))o.call(t,a)&&i(e,a,t[a]);if(r)for(var a of r(t))n.call(t,a)&&i(e,a,t[a]);return e})({},e.record))}))));return{registerModal:k,registerForm:m,getTitle:M((()=>g(s)?"编辑游戏":"新增游戏")),handleSubmit:function(){return l(this,null,(function*(){try{const t=yield I();v({confirmLoading:!0}),t.id?yield function(t,a="modal"){return y.post({url:e.UpdateMarketCoin,params:t},{errorMessageMode:a})}(t):yield function(t,a="modal"){return y.post({url:e.AddMarketCoin,params:t},{errorMessageMode:a})}(t),C(),a("success")}finally{v({confirmLoading:!1})}}))}}}});P.render=function(e,t,a,r,o,n){const i=I("BasicForm"),l=I("BasicModal");return k(),v(l,h(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:C((()=>[x(i,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};var F=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:P});export{q as C,D,F as M,P as _,j as c};
