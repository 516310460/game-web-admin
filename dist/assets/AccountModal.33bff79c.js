var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o,s=(e,a,t)=>new Promise(((o,r)=>{var s=e=>{try{i(t.next(e))}catch(a){r(a)}},l=e=>{try{i(t.throw(e))}catch(a){r(a)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(s,l);i((t=t.apply(e,a)).next())}));import{_ as l,b as i}from"./useModal.7df4099e.js";import{e as n}from"./BasicForm.ca329dfa.js";import{u as d}from"./useForm.a15aba3a.js";import{a2 as c,bk as u,ae as m,k as p,r as f,f as b,u as g,L as h,o as v,q as y,R as w,s as j,O as I}from"./vendor.c2cc062a.js";/* empty css              */import{G as x}from"./Role.baecf625.js";import{g as O,b4 as F,b5 as M,h as P}from"./index.b2f89009.js";const S=[{title:"用户id",dataIndex:"id"},{title:"用户名",dataIndex:"userName"},{title:"密码",dataIndex:"password"},{title:"角色id",dataIndex:"roleId"},{title:"角色名称",dataIndex:"roleName"},{title:"状态",dataIndex:"state",customRender:({record:e})=>{const a="normal"==e.state?"green":"red",t="normal"==e.state?"正常":"locked"==e.state?"锁定":"暂停提币";return c(u,{color:a},(()=>t))}}],q=[{label:"id",field:"id",component:"Input",show:!1},{label:"角色名称",field:"roleId",component:"ApiSelect",componentProps:{api:x,labelField:"roleName",valueField:"id"},required:!0},{label:"用户名",field:"userName",component:"Input",required:!0},{label:"密码",field:"password",component:"InputPassword",required:!0,render:({model:e,field:a})=>c(m.Password,{placeholder:"请输入密码",onChange:t=>{e[a]=O(t.target.value)}})},{label:"状态",field:"state",component:"Select",required:!0,componentProps:{options:[{label:"正常",value:"normal"},{label:"锁定",value:"locked"},{label:"暂停提币",value:"forbid"}]}}],{createMessage:R}=P();var _=p({name:"AccountModal",components:{BasicModal:l,BasicForm:n},emits:["success","register"],setup(e,{emit:l}){const n=f(!0),[c,{setFieldsValue:u,updateSchema:m,resetFields:p,validate:h}]=d({labelWidth:100,schemas:q,showActionButtonGroup:!1,actionColOptions:{span:23}}),[v,{setModalProps:y,closeModal:w}]=i((e=>s(this,null,(function*(){p(),y({confirmLoading:!1}),n.value=!!(null==e?void 0:e.isUpdate),g(n)&&u(((e,s)=>{for(var l in s||(s={}))t.call(s,l)&&r(e,l,s[l]);if(a)for(var l of a(s))o.call(s,l)&&r(e,l,s[l]);return e})({},e.record)),m([{field:"password",show:!g(n),required:!g(n)},{field:"account",show:!g(n),required:!g(n)}])}))));return{registerModal:v,registerForm:c,getTitle:b((()=>g(n)?"编辑账号":"新增账号")),handleSubmit:function(){return s(this,null,(function*(){try{const e=yield h();let a;y({confirmLoading:!0}),a=e.id?yield F(e):yield M(e),a||(R.success("编辑成功"),w(),l("success"))}finally{y({confirmLoading:!1})}}))}}}});_.render=function(e,a,t,o,r,s){const l=h("BasicForm"),i=h("BasicModal");return v(),y(i,I(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:w((()=>[j(l,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};var k=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:_});export{k as A,_,S as c};
