var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,o=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s;import{k as n,ae as i,bk as c,B as d,c6 as u,a6 as p,f as m,I as f,L as v,o as g,q as b,R as x,s as y,Z as h,x as O,W as j,ai as w}from"./vendor.c2cc062a.js";/* empty css              */import{_ as T}from"./PageWrapper.15f3b793.js";import{aP as P}from"./index.a9cd95f2.js";import"./usePageContext.92db9508.js";/* empty css              *//* empty css              */import"./onMountedOrActivated.5a05012f.js";var k=n({components:{PageWrapper:T,[i.name]:i,InputTextArea:i.TextArea,Tag:c},setup(){const e=d({server:"ws://localhost:3380/test",sendValue:"",recordList:[]}),{status:n,data:i,send:c,close:v,open:g}=u(e.server,{autoReconnect:!0,heartbeat:!0});p((()=>{if(i.value)try{const a=JSON.parse(i.value);e.recordList.push(a)}catch(a){e.recordList.push({res:i.value,id:Math.ceil(1e3*Math.random()),time:(new Date).getTime()})}}));const b=m((()=>"OPEN"===n.value)),x=m((()=>b.value?"success":"red")),y=m((()=>[...e.recordList].reverse()));return h=((e,a)=>{for(var t in a||(a={}))r.call(a,t)&&o(e,t,a[t]);if(s)for(var t of s(a))l.call(a,t)&&o(e,t,a[t]);return e})({status:n,formatToDateTime:P},f(e)),a(h,t({handlerSend:function(){c(e.sendValue),e.sendValue=""},getList:y,toggle:function(){b.value?v():g()},getIsOpen:b,getTagColor:x}));var h}});const I={class:"flex"},C={class:"w-1/3 bg-white p-4"},L={class:"flex items-center"},_=y("span",{class:"text-lg font-medium mr-4"}," 连接状态: ",-1),S=y("hr",{class:"my-4"},null,-1),V={class:"flex"},W=h(" 服务地址 "),A=y("p",{class:"text-lg font-medium mt-4"},"设置",-1),D=y("hr",{class:"my-4"},null,-1),M=h(" 发送 "),B={class:"w-2/3 bg-white ml-4 p-4"},E=y("span",{class:"text-lg font-medium mr-4"}," 消息记录: ",-1),N=y("hr",{class:"my-4"},null,-1),R={class:"max-h-80 overflow-auto"},U={class:"flex items-center"},q=y("span",{class:"mr-2 text-primary font-medium"},"收到消息:",-1);k.render=function(e,a,t,s,r,l){const o=v("Tag"),n=v("a-input"),i=v("a-button"),c=v("InputTextArea"),d=v("PageWrapper");return g(),b(d,{title:"WebSocket 示例"},{default:x((()=>[y("div",I,[y("div",C,[y("div",L,[_,y(o,{color:e.getTagColor},{default:x((()=>[h(O(e.status),1)])),_:1},8,["color"])]),S,y("div",V,[y(n,{value:e.server,"onUpdate:value":a[1]||(a[1]=a=>e.server=a),disabled:""},{addonBefore:x((()=>[W])),_:1},8,["value"]),y(i,{type:e.getIsOpen?"danger":"primary",onClick:e.toggle},{default:x((()=>[h(O(e.getIsOpen?"关闭连接":"开启连接"),1)])),_:1},8,["type","onClick"])]),A,D,y(c,{placeholder:"需要发送到服务器的内容",disabled:!e.getIsOpen,value:e.sendValue,"onUpdate:value":a[2]||(a[2]=a=>e.sendValue=a),allowClear:""},null,8,["disabled","value"]),y(i,{type:"primary",block:"",class:"mt-4",disabled:!e.getIsOpen,onClick:e.handlerSend},{default:x((()=>[M])),_:1},8,["disabled","onClick"])]),y("div",B,[E,N,y("div",R,[y("ul",null,[(g(!0),b(j,null,w(e.getList,(a=>(g(),b("li",{class:"mt-2",key:a.time},[y("div",U,[q,y("span",null,O(e.formatToDateTime(a.time)),1)]),y("div",null,O(a.res),1)])))),128))])])])])])),_:1})};export default k;
