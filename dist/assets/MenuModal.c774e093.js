var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(t,o,r)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r,s=(e,t,o)=>new Promise(((r,i)=>{var s=e=>{try{n(o.next(e))}catch(t){i(t)}},a=e=>{try{n(o.throw(e))}catch(t){i(t)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,a);n((o=o.apply(e,t)).next())}));import{_ as a,b as n}from"./useModal.b188c2e0.js";import{e as d}from"./BasicForm.7d27c2f1.js";import{u as l}from"./useForm.abe4b088.js";import{f as m}from"./menu.data.466dec74.js";import{U as c,A as p}from"./AdminMenu.6f1b8a8b.js";import{k as u,r as f,f as b,u as j,L as g,o as y,q as h,R as x,s as v,O as M}from"./vendor.c2cc062a.js";import"./index.3df22268.js";import"./useWindowSizeFn.f7fa6c6d.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./CountdownInput.b674ffa1.js";/* empty css              *//* empty css              */import"./uuid.2b29000c.js";import"./download.1103b608.js";import"./StrengthMeter.b8c729fd.js";var O=u({name:"ManagementModal",components:{BasicModal:a,BasicForm:d},emits:["success","register"],setup(e,{emit:a}){const d=f(!0),[u,{setFieldsValue:g,updateSchema:y,resetFields:h,validate:x}]=l({labelWidth:160,schemas:m,showActionButtonGroup:!1,actionColOptions:{span:23}}),[v,{setModalProps:M,closeModal:O}]=n((e=>s(this,null,(function*(){h(),M({confirmLoading:!1}),d.value=!!(null==e?void 0:e.isUpdate),j(d)&&g(((e,s)=>{for(var a in s||(s={}))o.call(s,a)&&i(e,a,s[a]);if(t)for(var a of t(s))r.call(s,a)&&i(e,a,s[a]);return e})({},e.record))}))));return{registerModal:v,registerForm:u,getTitle:b((()=>j(d)?"编辑角色":"新增角色")),handleSubmit:function(){return s(this,null,(function*(){try{const e=yield x();M({confirmLoading:!0}),e.id?yield c(e):yield p(e),O(),a("success")}finally{M({confirmLoading:!1})}}))}}}});O.render=function(e,t,o,r,i,s){const a=g("BasicForm"),n=g("BasicModal");return y(),h(n,M(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:x((()=>[v(a,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};export default O;
