var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,s=(e,t,a)=>new Promise(((o,n)=>{var s=e=>{try{l(a.next(e))}catch(t){n(t)}},i=e=>{try{l(a.throw(e))}catch(t){n(t)}},l=e=>e.done?o(e.value):Promise.resolve(e.value).then(s,i);l((a=a.apply(e,t)).next())}));import{_ as i}from"./TableImg.64a40dd3.js";import{e as l,_ as r}from"./BasicForm.15159022.js";import{u as d}from"./useTable.b1d12c6f.js";import{b as c}from"./useModal.df8770e7.js";import{u}from"./useForm.096e68f4.js";import{a2 as p,bk as m,k as f,av as b,bu as h,r as g,u as j,f as x,L as w,o as v,q as y,R as S,s as I,Y as P,Z as O}from"./vendor.c2cc062a.js";/* empty css              */import{e as C,c as F}from"./system.d6ec51a5.js";import{_ as R}from"./PageWrapper.304283c7.js";import{g as T}from"./useFunction.14dfe9fd.js";/* empty css              *//* empty css              */import"./index.e2f8dfb6.js";/* empty css              *//* empty css              */import"./uuid.2b29000c.js";import"./useWindowSizeFn.f7fa6c6d.js";import"./onMountedOrActivated.5a05012f.js";/* empty css              */import"./useSortable.584897bb.js";import"./useExpose.9766eb76.js";/* empty css              *//* empty css              *//* empty css              */import"./CountdownInput.d437ddc4.js";/* empty css              */import"./download.bc82a2de.js";import"./StrengthMeter.48e5d163.js";import"./usePageContext.e3c0a1fa.js";/* empty css              *//* empty css              */const A=[{title:"用户名ID",dataIndex:"userId",width:120},{title:"用户名",dataIndex:"userName"},{title:"币种名称",dataIndex:"coinName",width:90},{title:"主网",dataIndex:"mainNet",width:90},{title:"收币地址",dataIndex:"toAddress"},{title:"txid",dataIndex:"txid"},{title:"提币状态",dataIndex:"state",width:100,customRender:({record:e})=>{const t=e.state,a=0==t?"待审核":1==t?"审核通过":2==t?"已完成":3==t?"审核拒绝":"提币失败";return p(m,{color:1==t||2==t?"green":"red"},(()=>a))}},{title:"创建时间",dataIndex:"createTime",width:180}],_=[{field:"userName",label:"用户名",component:"Input",colProps:{span:8}},{field:"state",label:"状态",component:"Select",componentProps:{options:[{label:"待审核",value:0},{label:"审核通过",value:1},{label:"已完成",value:2},{label:"审核拒绝",value:3},{label:"提币失败",value:4}]},colProps:{span:8}}],M=[];var B=f({name:"AccountModal",components:{PageWrapper:R,BasicForm:l,BasicTable:i,TableAction:r,Dropdown:b,[h.name]:h,ASelectOption:h.Option},emits:["success","register"],setup(e,{emit:i}){const l=g(!1);let r=g([]);const[p,{setFieldsValue:m,updateSchema:f,resetFields:b,validate:h}]=u({labelWidth:100,schemas:M,showActionButtonGroup:!1,actionColOptions:{span:23}}),[w,{reload:v,setProps:y,getSelectRows:S,getSelectRowKeys:I,clearSelectedRowKeys:P}]=d({title:"提币列表",api:C,columns:A,formConfig:{labelWidth:60,schemas:_},useSearchForm:!0,showTableSetting:!0,bordered:!0,actionColumn:{width:80,title:"操作",dataIndex:"action",slots:{customRender:"action"}},rowSelection:{type:"checkbox"}}),O=g();O.value=T();const[R,{setModalProps:B,closeModal:E}]=c((e=>s(this,null,(function*(){b(),B({confirmLoading:!1}),l.value=!!(null==e?void 0:e.isUpdate),j(l)&&m(((e,s)=>{for(var i in s||(s={}))a.call(s,i)&&n(e,i,s[i]);if(t)for(var i of t(s))o.call(s,i)&&n(e,i,s[i]);return e})({},e.record))})))),W=x((()=>j(l)?"查询提币列表":"新增账号")),k=x((()=>S()));return{registerTable:w,handleToExamine:function(){return s(this,null,(function*(){r.value=S()}))},handleEdit:function(e){},registerModal:R,registerForm:p,getTitle:W,handleSubmit:function(){return s(this,null,(function*(){try{yield h();B({confirmLoading:!0}),E(),i("success")}finally{B({confirmLoading:!1})}}))},handleOpen:function(e,t){return s(this,null,(function*(){yield F({ids:e.id,state:t}),P(),v({page:1})}))},handleChange:e=>s(this,null,(function*(){let t=[];k.value.forEach((e=>{t.push(e.id)})),yield F({ids:t.join(),state:e}),P(),v({page:1})})),rows:r,isRows:k,selectValue:g(""),funcKeyArray:O}}});const E=O("请选择审核"),W=O("审核通过"),k=O("审核拒绝"),D=O("提币失败");B.render=function(e,t){const a=w("a-select-option"),o=w("a-select"),n=w("TableAction"),s=w("BasicTable"),i=w("BasicForm"),l=w("PageWrapper");return v(),y(l,{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex"},{default:S((()=>[I(s,{onRegister:e.registerTable,class:"w-full xl:w-full"},{toolbar:S((()=>[e.isRows.length?(v(),y(o,{key:0,value:e.selectValue,"onUpdate:value":t[1]||(t[1]=t=>e.selectValue=t),style:{width:"120px"},ref:"select",onChange:e.handleChange},{default:S((()=>[I(a,{value:"",disabled:""},{default:S((()=>[E])),_:1}),I(a,{value:"1"},{default:S((()=>[W])),_:1}),I(a,{value:"3"},{default:S((()=>[k])),_:1}),I(a,{value:"4"},{default:S((()=>[D])),_:1})])),_:1},8,["value","onChange"])):P("",!0)])),action:S((({record:t})=>[I(n,{dropDownActions:e.funcKeyArray.includes("toExamine")?[{label:"审核通过",popConfirm:{title:"是否审核通过？",confirm:e.handleOpen.bind(null,t,1)},ifShow:()=>1!=t.state},{label:"审核拒绝",popConfirm:{title:"是否审核拒绝？",confirm:e.handleOpen.bind(null,t,3)},ifShow:()=>3!=t.state}]:[]},null,8,["dropDownActions"])])),_:1},8,["onRegister"]),I(i,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1})};export default B;
