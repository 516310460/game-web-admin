var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,n=(e,t,a)=>new Promise(((r,o)=>{var n=e=>{try{i(a.next(e))}catch(t){o(t)}},l=e=>{try{i(a.throw(e))}catch(t){o(t)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,l);i((a=a.apply(e,t)).next())}));import{_ as l,b as i}from"./useModal.1e927a40.js";import{e as s}from"./BasicForm.dbc54f8f.js";import{u as d}from"./useForm.a1fbfd4e.js";import{a2 as m,bk as c,k as u,r as p,f,u as b,L as I,o as g,q as v,R as M,s as h,O as x}from"./vendor.c2cc062a.js";/* empty css              */import{U as y,A as Y}from"./CcMarketCoin.5cc3e283.js";const q=[{title:"ID",dataIndex:"id"},{dataIndex:"roomId",title:"大厅id"},{dataIndex:"gameIndex",title:"游戏关数"},{dataIndex:"targetAmount",title:"过关目标数量"},{dataIndex:"completed",title:"已完成数量"},{dataIndex:"maxAmount",title:"单账户最高投入数量"},{dataIndex:"interestRate",title:"每期收益率"},{dataIndex:"serviceCharge",title:"手续费(扣除平台币比例)"},{dataIndex:"startTime",title:"开始时间"},{dataIndex:"endTime",title:"结束时间"},{dataIndex:"state",title:"游戏状态",customRender:({record:e})=>{let t="";switch(e.state){case 0:t="待开启";break;case 1:t="已开启";break;case 2:t="已售罄";break;case 3:t="已退款";break;case 4:t="已结算"}return m(c,{},(()=>t))}}],D=[{field:"id",label:"ID",component:"Input",required:!1,show:!1},{field:"roomId",label:"大厅id",component:"Input",required:!0},{field:"gameIndex",label:"游戏关数",component:"Input",required:!0},{field:"state",label:"游戏状态",component:"Select",required:!0,componentProps:{options:[{label:"待开启",value:0},{label:"已开启",value:1},{label:"已售罄",value:2},{label:"已退款",value:3},{label:"已结算",value:4}]}},{field:"targetAmount",label:"过关目标数量",component:"Input",required:!0},{field:"completed",label:"已完成数量",component:"Input",required:!0},{field:"maxAmount",label:"单账户最高投入数量",component:"Input",required:!0},{field:"interestRate",label:"每期收益率",component:"Input",required:!0},{field:"serviceCharge",label:"手续费(扣除平台币比例)",component:"Input",required:!0},{field:"startTime",label:"开始时间",component:"DatePicker",required:!0,componentProps:{showTime:{format:"YYYY-MM-DD HH:mm:ss"},valueFormat:"YYYY-MM-DD HH:mm:ss"}},{field:"endTime",label:"结束时间",component:"DatePicker",required:!0,componentProps:{showTime:{format:"YYYY-MM-DD HH:mm:ss"},valueFormat:"YYYY-MM-DD HH:mm:ss"}}];var j=u({name:"ManagementModal",components:{BasicModal:l,BasicForm:s},emits:["success","register"],setup(e,{emit:l}){const s=p(!0),[m,{setFieldsValue:c,updateSchema:u,resetFields:I,validate:g}]=d({labelWidth:165,schemas:D,showActionButtonGroup:!1,actionColOptions:{span:23}}),[v,{setModalProps:M,closeModal:h}]=i((e=>n(this,null,(function*(){I(),M({confirmLoading:!1}),s.value=!!(null==e?void 0:e.isUpdate),b(s)&&c(((e,n)=>{for(var l in n||(n={}))a.call(n,l)&&o(e,l,n[l]);if(t)for(var l of t(n))r.call(n,l)&&o(e,l,n[l]);return e})({},e.record))}))));return{registerModal:v,registerForm:m,getTitle:f((()=>b(s)?"编辑游戏":"新增游戏")),handleSubmit:function(){return n(this,null,(function*(){try{const e=yield g();M({confirmLoading:!0}),e.id?yield y(e):yield Y(e),h(),l("success")}finally{M({confirmLoading:!1})}}))}}}});j.render=function(e,t,a,r,o,n){const l=I("BasicForm"),i=I("BasicModal");return g(),v(i,x(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:M((()=>[h(l,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};var k=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:j});export{k as M,j as _,q as c};
