var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,n=(e,t,a)=>new Promise(((o,r)=>{var n=e=>{try{l(a.next(e))}catch(t){r(t)}},i=e=>{try{l(a.throw(e))}catch(t){r(t)}},l=e=>e.done?o(e.value):Promise.resolve(e.value).then(n,i);l((a=a.apply(e,t)).next())}));import{_ as i,b as l}from"./useModal.7df4099e.js";import{e as s}from"./BasicForm.ca329dfa.js";import{u as d}from"./useForm.a15aba3a.js";import{a2 as u,bk as c,k as m,r as p,f,u as b,L as g,o as y,q as I,R as h,s as v,O as q}from"./vendor.c2cc062a.js";/* empty css              */import{U as x,A as j}from"./SysCountryConf.5673d338.js";const M=[{title:"ID",dataIndex:"id"},{title:"节点期数",dataIndex:"pnumber"},{title:"收益倍数",dataIndex:"income"},{title:"认购数量",dataIndex:"quantity"},{title:"认购价格",dataIndex:"price"},{title:"抢购名额",dataIndex:"quota"},{title:"抢购时间",dataIndex:"enoughTime"},{title:"剩余名额",dataIndex:"useQuote"},{title:"节点认购状态",dataIndex:"state",customRender:({record:e})=>{let t;switch(e.state){case 0:t="未开始";break;case 1:t="抢购中";break;case 2:t="已完成"}return u(c,{},(()=>t))}}],O=[{field:"id",label:"ID",component:"Input",required:!1,show:!1},{field:"income",label:"收益倍数",component:"Input",required:!0},{field:"quantity",label:"认购数量",component:"Input",required:!0},{field:"price",label:"认购价格",component:"Input",required:!0},{field:"quota",label:"抢购名额",component:"Input",required:!0},{field:"enoughTime",label:"抢购时间",component:"Input",required:!0},{field:"useQuote",label:"剩余名额",component:"Input",required:!0},{field:"state",label:"节点认购状态",component:"Select",required:!0,componentProps:{options:[{label:"未开始",value:0},{label:"抢购中",value:1},{label:"已完成",value:2}]}}];var w=m({name:"ManagementModal",components:{BasicModal:i,BasicForm:s},emits:["success","register"],setup(e,{emit:i}){const s=p(!0),[u,{setFieldsValue:c,updateSchema:m,resetFields:g,validate:y}]=d({labelWidth:140,schemas:O,showActionButtonGroup:!1,actionColOptions:{span:23}}),[I,{setModalProps:h,closeModal:v}]=l((e=>n(this,null,(function*(){g(),h({confirmLoading:!1}),s.value=!!(null==e?void 0:e.isUpdate),b(s)&&c(((e,n)=>{for(var i in n||(n={}))a.call(n,i)&&r(e,i,n[i]);if(t)for(var i of t(n))o.call(n,i)&&r(e,i,n[i]);return e})({},e.record))}))));return{registerModal:I,registerForm:u,getTitle:f((()=>b(s)?"编辑节点":"新增节点")),handleSubmit:function(){return n(this,null,(function*(){try{const e=yield y();h({confirmLoading:!0}),e.id?yield x(e):yield j(e),v(),i("success")}finally{h({confirmLoading:!1})}}))}}}});w.render=function(e,t,a,o,r,n){const i=g("BasicForm"),l=g("BasicModal");return y(),I(l,q(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:h((()=>[v(i,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};var F=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:w});export{F as M,w as _,M as c};
