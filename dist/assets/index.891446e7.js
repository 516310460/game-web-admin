var r;import e from"./DetailModal.c6f50c77.js";import{_ as o}from"./TableImg.8c388204.js";import{_ as t}from"./BasicForm.c38a0cc7.js";import{u as i}from"./useTable.886ffa4e.js";import{u as s}from"./useModal.735ea034.js";import{aA as a,d as n,a_ as l}from"./index.02e800e3.js";import{getColumns as c}from"./data.705c974c.js";import{k as m,r as d,F as u,K as f,an as p,L as j,o as b,q as g,W as x,ai as y,w as v,v as E,s as h,R as w,Z as D,x as L}from"./vendor.c2cc062a.js";import"./Description.vue_vue&type=script&lang.8d8c8f34.js";/* empty css              */import"./useDescription.177b5e3c.js";/* empty css              *//* empty css              */import"./useForm.266127a6.js";/* empty css              *//* empty css              *//* empty css              */import"./uuid.2b29000c.js";import"./useWindowSizeFn.f7fa6c6d.js";import"./onMountedOrActivated.5a05012f.js";/* empty css              */import"./useSortable.ec20bd81.js";import"./useExpose.9766eb76.js";/* empty css              *//* empty css              *//* empty css              */import"./CountdownInput.e002f8f6.js";/* empty css              */import"./download.4c107ff8.js";import"./StrengthMeter.4b5a58a5.js";(r||(r={})).Error="/error";var k=m({name:"ErrorHandler",components:{DetailModal:e,BasicTable:o,TableAction:t},setup(){const e=d(),o=d([]),{t:t}=n(),m=l(),[j,{setTableData:b}]=i({title:t("sys.errorLog.tableTitle"),columns:c(),actionColumn:{width:80,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),[g,{openModal:x}]=s();return u((()=>m.getErrorLogInfoList),(r=>{f((()=>{b(p(r))}))}),{immediate:!0}),{register:j,registerModal:g,handleDetail:function(r){e.value=r,x(!0)},fireVueError:function(){throw new Error("fire vue error!")},fireResourceError:function(){o.value.push(`${(new Date).getTime()}.png`)},fireAjaxError:function(){return e=this,o=null,t=function*(){yield a.get({url:r.Error})},new Promise(((r,i)=>{var s=r=>{try{n(t.next(r))}catch(e){i(e)}},a=r=>{try{n(t.throw(r))}catch(e){i(e)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,a);n((t=t.apply(e,o)).next())}));var e,o,t},imgList:o,rowInfo:e,t:t}}});const A={class:"p-4"};k.render=function(r,e,o,t,i,s){const a=j("DetailModal"),n=j("a-button"),l=j("TableAction"),c=j("BasicTable");return b(),g("div",A,[(b(!0),g(x,null,y(r.imgList,(r=>v((b(),g("img",{key:r,src:r},null,8,["src"])),[[E,!1]]))),128)),h(a,{info:r.rowInfo,onRegister:r.registerModal},null,8,["info","onRegister"]),h(c,{onRegister:r.register,class:"error-handle-table"},{toolbar:w((()=>[h(n,{onClick:r.fireVueError,type:"primary"},{default:w((()=>[D(L(r.t("sys.errorLog.fireVueError")),1)])),_:1},8,["onClick"]),h(n,{onClick:r.fireResourceError,type:"primary"},{default:w((()=>[D(L(r.t("sys.errorLog.fireResourceError")),1)])),_:1},8,["onClick"]),h(n,{onClick:r.fireAjaxError,type:"primary"},{default:w((()=>[D(L(r.t("sys.errorLog.fireAjaxError")),1)])),_:1},8,["onClick"])])),action:w((({record:e})=>[h(l,{actions:[{label:r.t("sys.errorLog.tableActionDesc"),onClick:r.handleDetail.bind(null,e)}]},null,8,["actions"])])),_:1},8,["onRegister"])])};export default k;
