var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,a=(t,o,r)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r,s=(e,t,o)=>new Promise(((r,a)=>{var s=e=>{try{l(o.next(e))}catch(t){a(t)}},i=e=>{try{l(o.throw(e))}catch(t){a(t)}},l=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,i);l((o=o.apply(e,t)).next())}));import{_ as i,b as l}from"./useModal.24c63ad5.js";import{e as n}from"./BasicForm.4e8612e4.js";import{u as d}from"./useForm.c8762787.js";import{a2 as c,bk as u,k as m,r as p,f,u as b,L as g,o as h,q as y,R as v,s as w,O as I}from"./vendor.c2cc062a.js";/* empty css              */import{G as j}from"./Role.5cc66a27.js";import{b4 as x,b5 as O,h as F}from"./index.a9cd95f2.js";const M=[{title:"用户id",dataIndex:"id"},{title:"用户名",dataIndex:"userName"},{title:"密码",dataIndex:"password"},{title:"角色id",dataIndex:"roleId"},{title:"角色名称",dataIndex:"roleName"},{title:"状态",dataIndex:"state",customRender:({record:e})=>{const t="normal"==e.state?"green":"red",o="normal"==e.state?"正常":"locked"==e.state?"锁定":"暂停提币";return c(u,{color:t},(()=>o))}}],P=[{label:"id",field:"id",component:"Input",show:!1},{label:"角色名称",field:"roleId",component:"ApiSelect",componentProps:{api:j,labelField:"roleName",valueField:"id"},required:!0},{label:"用户名",field:"userName",component:"Input",required:!0},{label:"密码",field:"password",component:"InputPassword",required:!0,show:!0},{label:"状态",field:"state",component:"Input",required:!0}],{createMessage:q}=F();var R=m({name:"AccountModal",components:{BasicModal:i,BasicForm:n},emits:["success","register"],setup(e,{emit:i}){const n=p(!0),[c,{setFieldsValue:u,updateSchema:m,resetFields:g,validate:h}]=d({labelWidth:100,schemas:P,showActionButtonGroup:!1,actionColOptions:{span:23}}),[y,{setModalProps:v,closeModal:w}]=l((e=>s(this,null,(function*(){g(),v({confirmLoading:!1}),n.value=!!(null==e?void 0:e.isUpdate),b(n)&&u(((e,s)=>{for(var i in s||(s={}))o.call(s,i)&&a(e,i,s[i]);if(t)for(var i of t(s))r.call(s,i)&&a(e,i,s[i]);return e})({},e.record)),m([{field:"password",show:!b(n),required:!b(n)},{field:"account",show:!b(n),required:!b(n)}])}))));return{registerModal:y,registerForm:c,getTitle:f((()=>b(n)?"编辑账号":"新增账号")),handleSubmit:function(){return s(this,null,(function*(){try{const e=yield h();let t;v({confirmLoading:!0}),t=e.id?yield x(e):yield O(e),t||(q.success("编辑成功"),w(),i("success"))}finally{v({confirmLoading:!1})}}))}}}});R.render=function(e,t,o,r,a,s){const i=g("BasicForm"),l=g("BasicModal");return h(),y(l,I(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:v((()=>[w(i,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};var S=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:R});export{S as A,R as _,M as c};
